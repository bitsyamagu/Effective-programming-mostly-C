# 写経とインクリメンタル開発によるプログラミング学習

## 計算が遅いなー

とつぶやきながら仕事をしていないでしょうか？

実用的なプログラムを書くにあたり、現在ではPythonやJavaを利用してプログラムを書くことが
ごく当たり前のような状況になっています。これはHPC分野も同様ですがこの分野では

「なぜか計算が遅いのだけど計算量に対してこの時間と負荷は妥当？」

というような状況にしばしば直面します。それらの言語でしか
プログラムを書いた経験のない人はそれに気づくときの
体感温度が高すぎると言いますか、気付きにくいということが
私の身の回りではしばしば観測されます。遅いだけならまだよいのですが、
最悪の場合は並列計算機を停止させたり、故障させたりすることに
なるので、なかなか放置するわけにもいかず障害対応に
追われて忙しくなる原因になってしまいます。

計算が遅くなる原因はプログラムのコードに限らず、ハードウェアの仕様によるものや、OSの設定によるものなど
様々ですが、技術的なことはさておき、まずは「計算が遅すぎるのではないか？」「想定していた
計算量に対して計算機の負荷が高すぎるのではないか？」ということに気付くのが大事です。
これに気付けるかどうかは、扱っているデータ量や計算内容から経験的に見知っている計算時間が基準になっていると
思います。おそらく、この体感的な計算の所要時間がPythonのような言語を利用していると
遅いことに慣れてしまったために、異常があっても気づきにくくなってしまっているのかも
しれません。

C言語のようなプログラムは、コードを書くことはやや技術的に苦労が多いのですが、
ひとたび計算が回るようになってしまえば計算速度で裏切られることは少なく素直です。
おそらく、C言語の経験者は、計算時間を計れる体内時計を持っているので、そこから
大きなズレを感じるといてもたってもいられなくなります。この資料の目的は
読者の皆さんにそのような体内時計を身に着けてもらうことを目的の一つにしています。

## ポインタは難しい。でも、ポインタの何が難しい？
C言語といえば、必ずといっていいほど「C言語のプログラミングは挫折しやすい」
とされていますが、周囲を見回してみると以下のような理由があるようでした。

1. なぜポインタが必要か分からない
2. ポインタのポインタ？
3. ポインタの演算？？
4. ポインタ？参照？ハンドル？？？

このような疑問に答えるには、計算機の仕組みや設計手法について学ばないと理解できません。
あるいはC言語の入門書だけではなく様々な他のプログラミング言語と比較してみるのも良いでしょう。
もし1番のような段階で止まったままPythonでコードを書いているとすると、動いているとしても
設計に問題を抱えていて、コードがスパゲッティのように絡み合って読みにくくなっていたり、
計算中に予期しないエラーが起きても原因の究明が困難になっているのではないでしょうか。

PythonでもPerlでも、この資料で学んだことはきっと役に立つでしょう。特に大きな計算を
する場合には。

## 対象とする読者と前提として必要な知識
プログラムを書きたい人、書いている人で「計算が遅いなー」というところから前進したい人や
HPCやGPUプログラミングにこれから挑戦したい人で、C言語を使ったことがない人を想定しています。
とはいえ、入門書は世の中にたくさんありますから、入門書は市販のものを読んでいただくとして、
C言語の文法くらいは覚えた後に、この資料を読んでください。

なお、この資料ではプログラムを高速化する技法については紹介しませんが、著しい低速化を
招くような現象や、トラブルを起こしやすい問題については折に触れて紹介して
いきたいと思います。
